---
interface Props {
  lines?: number;
  height?: string;
  count?: number;
}

const { lines = 3, height = "1rem", count = 1 } = Astro.props;
---

{Array.from({ length: count }).map(() => (
  <div class="skeleton-container">
    {Array.from({ length: lines }).map(() => (
      <div class="skeleton" style={`height: ${height}`}></div>
    ))}
  </div>
))}

<style>
  .skeleton-container {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    width: 100%;
  }

  .skeleton {
    background: linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.05) 25%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.05) 75%
    );
    background-size: 200% 100%;
    border-radius: var(--radius-sm);
    animation: shimmer 1.5s infinite;
  }

  [data-theme="dark"] .skeleton {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.05) 25%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0.05) 75%
    );
    background-size: 200% 100%;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .skeleton {
      animation: none;
      background: rgba(0, 0, 0, 0.08);
    }

    [data-theme="dark"] .skeleton {
      background: rgba(255, 255, 255, 0.08);
    }
  }
</style>
