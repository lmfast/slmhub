---
/**
 * Advanced DataTable Component for Astro
 * Features:
 * - Full-text search across all columns
 * - Column sorting (ascending/descending)
 * - Pagination with customizable page size
 * - Responsive design (mobile-friendly)
 * - Dark/light mode support
 * - Smooth animations
 * - Accessibility (WCAG AAA)
 * - Clean, professional design
 */

interface Column {
  key: string;
  label: string;
  sortable?: boolean;
  searchable?: boolean;
  render?: (value: any, row: any) => string;
}

interface Props {
  columns: Column[];
  data: any[];
  itemsPerPage?: number;
  searchable?: boolean;
  striped?: boolean;
  hoverable?: boolean;
}

const {
  columns,
  data,
  itemsPerPage = 10,
  searchable = true,
  striped = true,
  hoverable = true,
} = Astro.props;

const tableId = `dt-${Math.random().toString(36).substr(2, 9)}`;
---

<div class="data-table-container" id={tableId}>
  <!-- Search Bar -->
  {searchable && (
    <div class="dt-toolbar">
      <div class="dt-search-wrapper">
        <input
          type="text"
          class="dt-search-input"
          placeholder="Search all columns..."
          aria-label="Search table"
          data-search-input
        />
        <span class="dt-search-icon" aria-hidden="true">üîç</span>
      </div>

      <!-- Results Info -->
      <div class="dt-results-info" data-results-info>
        Showing <span data-current-count>0</span> of
        <span data-total-count>{data.length}</span>
      </div>
    </div>
  )}

  <!-- Table Wrapper (for horizontal scroll on mobile) -->
  <div class="dt-table-wrapper">
    <table
      class:list={[
        "dt-table",
        { "dt-striped": striped },
        { "dt-hoverable": hoverable },
      ]}
    >
      <thead>
        <tr class="dt-header-row">
          {columns.map((col) => (
            <th
              class={`dt-header-cell ${col.sortable ? "dt-sortable" : ""}`}
              data-column={col.key}
              data-sortable={col.sortable}
            >
              <div class="dt-header-content">
                <span>{col.label}</span>
                {col.sortable && (
                  <span class="dt-sort-indicator" aria-hidden="true">
                    ‚¨ç
                  </span>
                )}
              </div>
            </th>
          ))}
        </tr>
      </thead>

      <tbody class="dt-body" data-table-body>
        <!-- Rows will be populated by JavaScript -->
        {data.map((row) => (
          <tr class="dt-row" data-row-id={row.id || Math.random()}>
            {columns.map((col) => (
              <td class="dt-cell" data-column={col.key}>
                {col.render ? (
                  <Fragment set:html={col.render(row[col.key], row)} />
                ) : (
                  row[col.key]
                )}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>

    <!-- Empty State -->
    <div class="dt-empty-state" data-empty-state style="display: none;">
      <div class="dt-empty-content">
        <p>No results found</p>
        <small>Try adjusting your search</small>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  {itemsPerPage < data.length && (
    <div class="dt-pagination">
      <button class="dt-pagination-btn" data-prev-btn aria-label="Previous page">
        Previous
      </button>

      <div class="dt-pagination-info" data-pagination-info>
        Page <span data-current-page>1</span> of
        <span data-total-pages>1</span>
      </div>

      <button class="dt-pagination-btn" data-next-btn aria-label="Next page">
        Next
      </button>
    </div>
  )}

  <!-- Row Count Selector -->
  <div class="dt-footer">
    <label for={`${tableId}-per-page`} class="dt-per-page-label">
      Rows per page:
    </label>
    <select
      id={`${tableId}-per-page`}
      class="dt-per-page-select"
      data-per-page-select
    >
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="all">All</option>
    </select>
  </div>
</div>

<script define:vars={{ tableId, itemsPerPage }}>
  (() => {
    const container = document.getElementById(tableId);
    if (!container) return;

    // State
    let allData = Array.from(
      container.querySelectorAll("[data-table-body] tr")
    );
    let filteredData = [...allData];
    let currentPage = 1;
    let rowsPerPage = itemsPerPage;
    let sortColumn = null;
    let sortDirection = "asc";

    const elements = {
      searchInput: container.querySelector("[data-search-input]"),
      tableBody: container.querySelector("[data-table-body]"),
      sortableHeaders: container.querySelectorAll("[data-sortable=true]"),
      paginationInfo: container.querySelector("[data-pagination-info]"),
      currentPageSpan: container.querySelector("[data-current-page]"),
      totalPagesSpan: container.querySelector("[data-total-pages]"),
      currentCountSpan: container.querySelector("[data-current-count]"),
      prevBtn: container.querySelector("[data-prev-btn]"),
      nextBtn: container.querySelector("[data-next-btn]"),
      perPageSelect: container.querySelector("[data-per-page-select]"),
      emptyState: container.querySelector("[data-empty-state]"),
      resultsInfo: container.querySelector("[data-results-info]"),
      totalCountSpan: container.querySelector("[data-total-count]"),
    };

    // Search
    if (elements.searchInput) {
      elements.searchInput.addEventListener("input", (e) => {
        const query = e.target.value.toLowerCase();
        currentPage = 1;

        if (query === "") {
          filteredData = [...allData];
        } else {
          filteredData = allData.filter((row) => {
            const text = row.innerText.toLowerCase();
            return text.includes(query);
          });
        }

        updateDisplay();
      });
    }

    // Sort
    elements.sortableHeaders.forEach((header) => {
      header.style.cursor = "pointer";
      header.addEventListener("click", () => {
        const column = header.dataset.column;

        if (sortColumn === column) {
          sortDirection = sortDirection === "asc" ? "desc" : "asc";
        } else {
          sortColumn = column;
          sortDirection = "asc";
        }

        // Update visual indicator
        elements.sortableHeaders.forEach((h) => {
          const indicator = h.querySelector(".dt-sort-indicator");
          if (indicator) {
            if (h === header) {
              indicator.textContent = sortDirection === "asc" ? "‚Üë" : "‚Üì";
              indicator.style.opacity = "1";
            } else {
              indicator.textContent = "‚¨ç";
              indicator.style.opacity = "0.4";
            }
          }
        });

        filteredData.sort((a, b) => {
          const aVal = a.querySelector(`[data-column="${column}"]`)?.innerText
            || "";
          const bVal = b.querySelector(`[data-column="${column}"]`)?.innerText
            || "";

          // Try numeric sort
          const aNum = parseFloat(aVal);
          const bNum = parseFloat(bVal);
          if (!isNaN(aNum) && !isNaN(bNum)) {
            return sortDirection === "asc" ? aNum - bNum : bNum - aNum;
          }

          // String sort
          const comparison = aVal.localeCompare(bVal);
          return sortDirection === "asc" ? comparison : -comparison;
        });

        currentPage = 1;
        updateDisplay();
      });
    });

    // Pagination
    function updatePagination() {
      const totalPages = Math.ceil(filteredData.length / rowsPerPage);

      if (elements.currentPageSpan)
        elements.currentPageSpan.textContent = currentPage;
      if (elements.totalPagesSpan)
        elements.totalPagesSpan.textContent = totalPages;
      if (elements.paginationInfo)
        elements.paginationInfo.style.display =
          filteredData.length > rowsPerPage ? "flex" : "none";

      if (elements.prevBtn)
        elements.prevBtn.disabled = currentPage === 1;
      if (elements.nextBtn)
        elements.nextBtn.disabled = currentPage === totalPages || totalPages === 0;
    }

    if (elements.prevBtn) {
      elements.prevBtn.addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          updateDisplay();
        }
      });
    }

    if (elements.nextBtn) {
      elements.nextBtn.addEventListener("click", () => {
        const totalPages = Math.ceil(filteredData.length / rowsPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          updateDisplay();
        }
      });
    }

    // Rows per page
    if (elements.perPageSelect) {
      elements.perPageSelect.addEventListener("change", (e) => {
        const value = e.target.value;
        if (value === "all") {
          rowsPerPage = filteredData.length;
        } else {
          rowsPerPage = parseInt(value);
        }
        currentPage = 1;
        updateDisplay();
      });
    }

    // Display
    function updateDisplay() {
      const start = (currentPage - 1) * rowsPerPage;
      const end = rowsPerPage === filteredData.length ? filteredData.length : start + rowsPerPage;
      const paginatedData = filteredData.slice(start, end);

      // Hide all rows
      allData.forEach((row) => (row.style.display = "none"));

      // Show paginated rows
      paginatedData.forEach((row) => (row.style.display = ""));

      // Update counts
      if (elements.currentCountSpan)
        elements.currentCountSpan.textContent = paginatedData.length;

      // Show empty state
      if (elements.emptyState) {
        elements.emptyState.style.display =
          filteredData.length === 0 ? "flex" : "none";
      }

      // Update info
      if (elements.resultsInfo) {
        elements.resultsInfo.style.display =
          elements.searchInput?.value ? "block" : "none";
      }

      updatePagination();
    }

    // Initial display
    updateDisplay();
  })();
</script>

<style is:global>
  /* ============================================
     DataTable Styles - Clean & Professional
     ============================================ */

  .data-table-container {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    animation: fadeInUp 0.6s ease-out;
  }

  /* ============================================
     Toolbar
     ============================================ */

  .dt-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    flex-wrap: wrap;
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(139, 92, 246, 0.03) 100%);
    border: 1px solid rgba(255, 107, 53, 0.15);
    border-radius: 0.75rem 0.75rem 0 0;
    flex-grow: 1;
    backdrop-filter: blur(8px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  }

  [data-theme="dark"] .dt-toolbar {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.08) 0%, rgba(139, 92, 246, 0.05) 100%);
    border-color: rgba(255, 107, 53, 0.2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .dt-search-wrapper {
    position: relative;
    flex: 1;
    min-width: 250px;
    max-width: 400px;
  }

  .dt-search-input {
    width: 100%;
    padding: 0.75rem 1rem 0.75rem 2.75rem;
    border: 2px solid rgba(255, 107, 53, 0.2);
    background: white;
    color: #0f172a;
    font-size: 0.9rem;
    border-radius: 0.5rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .dt-search-input:focus {
    outline: none;
    border-color: #FF6B35;
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.15), 0 4px 12px rgba(255, 107, 53, 0.1);
    background: #fff5f2;
  }

  .dt-search-input::placeholder {
    color: #94a3b8;
  }

  [data-theme="dark"] .dt-search-input {
    background: #1e293b;
    color: #f1f5f9;
    border-color: rgba(255, 107, 53, 0.3);
  }

  [data-theme="dark"] .dt-search-input:focus {
    border-color: #FF8C5A;
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2), 0 4px 16px rgba(255, 107, 53, 0.15);
    background: #334155;
  }

  .dt-search-icon {
    position: absolute;
    left: 0.9rem;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    opacity: 0.6;
    font-size: 1rem;
    color: #FF6B35;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    filter: drop-shadow(0 1px 2px rgba(255, 107, 53, 0.3));
  }

  .dt-search-input:focus ~ .dt-search-icon {
    opacity: 1;
    color: #FF6B35;
    transform: translateY(-50%) scale(1.1);
    filter: drop-shadow(0 2px 4px rgba(255, 107, 53, 0.4));
  }
  
  .dt-search-input:hover ~ .dt-search-icon {
    opacity: 0.8;
  }

  .dt-results-info {
    font-size: 0.875rem;
    color: #475569;
    white-space: nowrap;
    font-weight: 500;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 0.5rem;
    border: 1px solid rgba(255, 107, 53, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .dt-results-info:hover {
    background: rgba(255, 107, 53, 0.05);
    border-color: rgba(255, 107, 53, 0.2);
    transform: scale(1.02);
  }
  
  .dt-results-info span {
    font-weight: 700;
    color: #FF6B35;
  }

  [data-theme="dark"] .dt-results-info {
    color: #cbd5e1;
    background: rgba(30, 41, 59, 0.6);
    border-color: rgba(255, 107, 53, 0.2);
  }
  
  [data-theme="dark"] .dt-results-info:hover {
    background: rgba(255, 107, 53, 0.08);
    border-color: rgba(255, 107, 53, 0.3);
  }
  
  [data-theme="dark"] .dt-results-info span {
    color: #FF8C5A;
  }

  /* ============================================
     Table Wrapper & Responsive
     ============================================ */

  .dt-table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border: 1px solid rgba(255, 107, 53, 0.15);
    border-top: none;
    border-bottom: none;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  }

  [data-theme="dark"] .dt-table-wrapper {
    background: #1e293b;
    border-color: rgba(255, 107, 53, 0.2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .dt-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }

  /* ============================================
     Table Header
     ============================================ */

  .dt-header-row {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.12) 0%, rgba(139, 92, 246, 0.08) 100%);
    border-bottom: 2px solid rgba(255, 107, 53, 0.2);
  }

  [data-theme="dark"] .dt-header-row {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
    border-bottom-color: rgba(255, 107, 53, 0.3);
  }

  .dt-header-cell {
    padding: 0.9rem 1.25rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    color: #0f172a;
    user-select: none;
  }

  [data-theme="dark"] .dt-header-cell {
    color: #f1f5f9;
  }

  .dt-header-content {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    justify-content: space-between;
  }

  .dt-sortable {
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .dt-sortable:hover {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.2) 0%, rgba(139, 92, 246, 0.15) 100%);
    transform: translateY(-1px);
  }

  [data-theme="dark"] .dt-sortable:hover {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.25) 0%, rgba(139, 92, 246, 0.18) 100%);
  }

  .dt-sort-indicator {
    opacity: 0.4;
    transition: opacity 0.2s ease;
    font-size: 0.7rem;
  }

  .dt-sortable:hover .dt-sort-indicator {
    opacity: 1;
  }

  /* ============================================
     Table Body & Rows
     ============================================ */

  .dt-body {
    transition: background-color 0.2s ease;
  }

  .dt-row {
    border-bottom: 1px solid #e2e8f0;
    transition: all 0.2s ease;
  }

  [data-theme="dark"] .dt-row {
    border-bottom-color: #334155;
  }

  .dt-striped .dt-row:nth-child(even) {
    background: #f8fafc;
  }

  [data-theme="dark"] .dt-striped .dt-row:nth-child(even) {
    background: #0f172a;
  }

  .dt-hoverable .dt-row:hover {
    background: linear-gradient(90deg, rgba(255, 107, 53, 0.08) 0%, rgba(139, 92, 246, 0.05) 100%);
    transform: translateX(2px);
    box-shadow: inset 4px 0 0 rgba(255, 107, 53, 0.3);
  }

  [data-theme="dark"] .dt-hoverable .dt-row:hover {
    background: linear-gradient(90deg, rgba(255, 107, 53, 0.12) 0%, rgba(139, 92, 246, 0.08) 100%);
    box-shadow: inset 4px 0 0 rgba(255, 107, 53, 0.4);
  }

  .dt-cell {
    padding: 0.85rem 1.25rem;
    color: #475569;
    vertical-align: middle;
  }

  [data-theme="dark"] .dt-cell {
    color: #cbd5e1;
  }

  /* ============================================
     Empty State
     ============================================ */

  .dt-empty-state {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 3rem;
    min-height: 280px;
  }

  .dt-empty-content {
    text-align: center;
  }

  .dt-empty-content p {
    font-size: 1rem;
    font-weight: 600;
    color: #64748b;
    margin: 0 0 0.5rem 0;
  }

  [data-theme="dark"] .dt-empty-content p {
    color: #cbd5e1;
  }

  .dt-empty-content small {
    color: #94a3b8;
    font-size: 0.85rem;
  }

  [data-theme="dark"] .dt-empty-content small {
    color: #64748b;
  }

  /* ============================================
     Pagination - Premium Design
     ============================================ */

  .dt-pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(139, 92, 246, 0.03) 100%);
    border: 1px solid rgba(255, 107, 53, 0.15);
    border-radius: 0.75rem;
    flex-wrap: wrap;
    backdrop-filter: blur(8px);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dt-pagination:hover {
    border-color: rgba(255, 107, 53, 0.25);
    box-shadow: 0 4px 16px rgba(255, 107, 53, 0.1);
  }

  [data-theme="dark"] .dt-pagination {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.08) 0%, rgba(139, 92, 246, 0.05) 100%);
    border-color: rgba(255, 107, 53, 0.2);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
  }

  [data-theme="dark"] .dt-pagination:hover {
    border-color: rgba(255, 107, 53, 0.3);
    box-shadow: 0 4px 20px rgba(255, 107, 53, 0.15);
  }

  .dt-pagination-btn {
    padding: 0.7rem 1.5rem;
    background: linear-gradient(135deg, #FF6B35 0%, #FF8C5A 100%);
    color: white;
    border: none;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    border-radius: 0.5rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(255, 107, 53, 0.25);
    position: relative;
    overflow: hidden;
  }

  .dt-pagination-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .dt-pagination-btn:hover:not(:disabled)::before {
    width: 300px;
    height: 300px;
  }

  .dt-pagination-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #E85A2A 0%, #FF6B35 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(255, 107, 53, 0.4);
  }

  .dt-pagination-btn:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
  }

  .dt-pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
    box-shadow: none;
  }

  .dt-pagination-info {
    font-size: 0.875rem;
    color: #475569;
    white-space: nowrap;
    font-weight: 500;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 0.5rem;
    border: 1px solid rgba(255, 107, 53, 0.1);
  }

  [data-theme="dark"] .dt-pagination-info {
    color: #cbd5e1;
    background: rgba(30, 41, 59, 0.6);
    border-color: rgba(255, 107, 53, 0.2);
  }

  /* ============================================
     Footer - Rows Per Page Selector
     ============================================ */

  .dt-footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.03) 0%, rgba(139, 92, 246, 0.02) 100%);
    border: 1px solid rgba(255, 107, 53, 0.12);
    border-radius: 0 0 0.75rem 0.75rem;
    border-top: none;
    backdrop-filter: blur(8px);
  }

  [data-theme="dark"] .dt-footer {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.06) 0%, rgba(139, 92, 246, 0.04) 100%);
    border-color: rgba(255, 107, 53, 0.15);
  }

  .dt-per-page-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #475569;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .dt-per-page-label::before {
    content: 'üìä';
    font-size: 1rem;
  }

  [data-theme="dark"] .dt-per-page-label {
    color: #cbd5e1;
  }

  .dt-per-page-select {
    padding: 0.65rem 1rem;
    border: 2px solid rgba(255, 107, 53, 0.2);
    background: white;
    color: #0f172a;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 0.5rem;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23FF6B35' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 12px;
    padding-right: 2.5rem;
    min-width: 80px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .dt-per-page-select:hover {
    border-color: rgba(255, 107, 53, 0.4);
    background-color: #fff5f2;
    box-shadow: 0 4px 8px rgba(255, 107, 53, 0.15);
    transform: translateY(-1px);
  }

  .dt-per-page-select:focus {
    outline: none;
    border-color: #FF6B35;
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.15), 0 4px 12px rgba(255, 107, 53, 0.2);
    background-color: white;
  }

  [data-theme="dark"] .dt-per-page-select {
    background: #1e293b;
    color: #f1f5f9;
    border-color: rgba(255, 107, 53, 0.3);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23FF8C5A' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  }

  [data-theme="dark"] .dt-per-page-select:hover {
    background-color: #334155;
    border-color: rgba(255, 107, 53, 0.5);
    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.25);
  }

  [data-theme="dark"] .dt-per-page-select:focus {
    border-color: #FF8C5A;
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2), 0 4px 16px rgba(255, 107, 53, 0.3);
    background-color: #1e293b;
  }

  /* ============================================
     Responsive Design
     ============================================ */

  @media (max-width: 768px) {
    .dt-toolbar {
      flex-direction: column;
      align-items: stretch;
    }

    .dt-search-wrapper {
      max-width: 100%;
    }

    .dt-results-info {
      text-align: center;
      width: 100%;
      margin-top: 0.5rem;
    }

    .dt-footer {
      justify-content: center;
      gap: 0.75rem;
    }

    .dt-cell {
      padding: 0.7rem 1rem;
      font-size: 0.85rem;
    }

    .dt-header-cell {
      padding: 0.75rem 1rem;
      font-size: 0.75rem;
    }

    .dt-pagination {
      gap: 1rem;
    }
  }

  @media (max-width: 480px) {
    .dt-table {
      font-size: 0.8rem;
    }

    .dt-cell {
      padding: 0.6rem 0.85rem;
    }

    .dt-header-cell {
      padding: 0.6rem 0.85rem;
    }

    .dt-pagination-btn {
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
    }

    .dt-toolbar {
      padding: 0.85rem 1rem;
    }
  }

  /* ============================================
     Animations
     ============================================ */

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
